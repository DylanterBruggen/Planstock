@{
	// Retrieve the events from ViewData
	var events = ViewData["Events"] as List<Frontend.Models.EventViewModel>;

	// Group events by date
	var groupedEvents = events?
		.GroupBy(e => e.Date.Date)
		.OrderBy(g => g.Key)
		.ToList();
}

<div class="col-8" style="display: flex; height: 100%; flex-direction:column; justify-content: space-between; gap:2rem">
	<div style="display: flex; flex-direction: row; justify-content:space-between">
		<h1 class="subtext" style="font-weight:700; font-size: 2rem;">Events</h1>
		<div class="subtext" style="padding: 2px; font-weight:700; font-size: 1rem; background: rgba(255,255,255, 0.3); border-radius:.5rem; display: flex; flex-direction: row; gap: .25rem">
			<button class="subtext px-2 py-1" style="border:none; width:100px; background: rgba(255,255,255, 0.3); border-radius:.5rem;">Upcoming</button>
			<button class="inputtext px-2 py-1" style="border:none; width:100px; background: rgba(255,255,255, 0); border-radius:.5rem;">Past</button>
		</div>
	</div>

	@if (events == null || !events.Any())
	{
		<!-- No events found section -->
		<div style="display:flex; justify-content:center; flex-direction:column; align-items: center;" class="pb-4">
			<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 420 380" width="400px">
				<g filter="url(#CalendarDark_svg__a)">
					<rect width="236" height="236" x="80" y="33" fill="url(#CalendarDark_svg__b)" rx="32"></rect>
				</g>
				<path fill="url(#CalendarDark_svg__c)" fill-rule="evenodd" d="M115 57c-6.075 0-11 4.925-11 11s4.925 11 11 11h166c6.075 0 11-4.925 11-11s-4.925-11-11-11zm-10.232 62.58c-.768 1.624-.768 3.722-.768 7.92s0 6.296.768 7.92a8 8 0 0 0 3.812 3.812c1.624.768 3.722.768 7.92.768h33c4.198 0 6.296 0 7.92-.768a8 8 0 0 0 3.812-3.812c.768-1.624.768-3.722.768-7.92s0-6.296-.768-7.92a8 8 0 0 0-3.812-3.812c-1.624-.768-3.722-.768-7.92-.768h-33c-4.198 0-6.296 0-7.92.768a8 8 0 0 0-3.812 3.812M104 198.8c0-4.48 0-6.721.872-8.432a8 8 0 0 1 3.496-3.496c1.711-.872 3.952-.872 8.432-.872h32.4c4.48 0 6.721 0 8.432.872a8 8 0 0 1 3.496 3.496c.872 1.711.872 3.952.872 8.432v33.4c0 4.48 0 6.721-.872 8.432a8 8 0 0 1-3.496 3.496c-1.711.872-3.952.872-8.432.872h-32.4c-4.48 0-6.721 0-8.432-.872a8 8 0 0 1-3.496-3.496C104 238.921 104 236.68 104 232.2zm68.872-100.432C172 100.08 172 102.32 172 106.8v34.4c0 4.48 0 6.721.872 8.432a8 8 0 0 0 3.496 3.496c1.711.872 3.952.872 8.432.872h32.4c4.48 0 6.721 0 8.432-.872a8 8 0 0 0 3.496-3.496c.872-1.711.872-3.952.872-8.432v-34.4c0-4.48 0-6.721-.872-8.432a8 8 0 0 0-3.496-3.496C223.921 94 221.68 94 217.2 94h-32.4c-4.48 0-6.721 0-8.432.872a8 8 0 0 0-3.496 3.496M172 232.5c0-4.198 0-6.296.768-7.92a8 8 0 0 1 3.812-3.812c1.624-.768 3.722-.768 7.92-.768h33c4.198 0 6.296 0 7.92.768a8 8 0 0 1 3.812 3.812c.768 1.624.768 3.722.768 7.92s0 6.296-.768 7.92a8 8 0 0 1-3.812 3.812c-1.624.768-3.722.768-7.92.768h-33c-4.198 0-6.296 0-7.92-.768a8 8 0 0 1-3.812-3.812c-.768-1.624-.768-3.722-.768-7.92m68.872-74.132C240 160.079 240 162.32 240 166.8v29.4c0 4.48 0 6.721.872 8.432a8 8 0 0 0 3.496 3.496c1.711.872 3.952.872 8.432.872h32.4c4.48 0 6.721 0 8.432-.872a8 8 0 0 0 3.496-3.496c.872-1.711.872-3.952.872-8.432v-29.4c0-4.48 0-6.721-.872-8.432a8 8 0 0 0-3.496-3.496C291.921 154 289.68 154 285.2 154h-32.4c-4.48 0-6.721 0-8.432.872a8 8 0 0 0-3.496 3.496" clip-rule="evenodd"></path>
				<g filter="url(#CalendarDark_svg__d)"><rect width="100" height="100" x="258" fill="url(#CalendarDark_svg__e)" rx="32"></rect><rect width="100" height="100" x="258" fill="url(#CalendarDark_svg__f)" rx="32"></rect></g>
				<path fill="#E0E0E0" d="M308.11 82.398q-7.833-.03-13.481-3.856-5.617-3.825-8.653-11.082-3.006-7.257-2.976-17.458 0-10.171 3.006-17.337 3.036-7.165 8.653-10.9Q300.307 18 308.11 18t13.42 3.765q5.647 3.765 8.684 10.93 3.036 7.135 3.005 17.307 0 10.231-3.036 17.488-3.006 7.257-8.623 11.083-5.617 3.825-13.45 3.825m0-10.9q5.343 0 8.532-5.374t3.157-16.122q0-7.075-1.457-11.78-1.427-4.707-4.069-7.075-2.61-2.368-6.163-2.368-5.313 0-8.502 5.313-3.188 5.314-3.218 15.91 0 7.165 1.427 11.962 1.458 4.767 4.099 7.166 2.642 2.368 6.194 2.368"></path>
				<path fill="url(#CalendarDark_svg__g)" d="M308.11 82.398q-7.833-.03-13.481-3.856-5.617-3.825-8.653-11.082-3.006-7.257-2.976-17.458 0-10.171 3.006-17.337 3.036-7.165 8.653-10.9Q300.307 18 308.11 18t13.42 3.765q5.647 3.765 8.684 10.93 3.036 7.135 3.005 17.307 0 10.231-3.036 17.488-3.006 7.257-8.623 11.083-5.617 3.825-13.45 3.825m0-10.9q5.343 0 8.532-5.374t3.157-16.122q0-7.075-1.457-11.78-1.427-4.707-4.069-7.075-2.61-2.368-6.163-2.368-5.313 0-8.502 5.313-3.188 5.314-3.218 15.91 0 7.165 1.427 11.962 1.458 4.767 4.099 7.166 2.642 2.368 6.194 2.368"></path>
				<defs><linearGradient id="CalendarDark_svg__b" x1="198" x2="198" y1="33" y2="269" gradientUnits="userSpaceOnUse"><stop stop-color="#4A4A4A"></stop><stop offset="1" stop-color="#313131"></stop></linearGradient><linearGradient id="CalendarDark_svg__c" x1="201" x2="201" y1="57" y2="245" gradientUnits="userSpaceOnUse"><stop stop-color="#111"></stop><stop offset="1" stop-color="#1F1F1F"></stop></linearGradient><linearGradient id="CalendarDark_svg__e" x1="308" x2="308" y1="0" y2="100" gradientUnits="userSpaceOnUse"><stop stop-color="#F7F7F7"></stop><stop offset="1" stop-color="#fff"></stop></linearGradient><linearGradient id="CalendarDark_svg__f" x1="308" x2="308" y1="0" y2="100" gradientUnits="userSpaceOnUse"><stop stop-color="#4A4A4A"></stop><stop offset="1" stop-color="#313131"></stop></linearGradient><linearGradient id="CalendarDark_svg__g" x1="308.11" x2="308.11" y1="18" y2="82.398" gradientUnits="userSpaceOnUse"><stop stop-color="#111"></stop><stop offset="1" stop-color="#1F1F1F"></stop></linearGradient><filter id="CalendarDark_svg__a" width="396" height="444" x="0" y="5" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="14"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1534_31596"></feComposite><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="2.767"></feOffset><feGaussianBlur stdDeviation="1.107"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.07 0"></feColorMatrix><feBlend in2="effect1_backgroundBlur_1534_31596" result="effect2_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="6.65"></feOffset><feGaussianBlur stdDeviation="2.66"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0503198 0"></feColorMatrix><feBlend in2="effect2_dropShadow_1534_31596" result="effect3_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="12.522"></feOffset><feGaussianBlur stdDeviation="5.009"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0417275 0"></feColorMatrix><feBlend in2="effect3_dropShadow_1534_31596" result="effect4_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="22.336"></feOffset><feGaussianBlur stdDeviation="8.935"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.035 0"></feColorMatrix><feBlend in2="effect4_dropShadow_1534_31596" result="effect5_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="41.778"></feOffset><feGaussianBlur stdDeviation="16.711"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0282725 0"></feColorMatrix><feBlend in2="effect5_dropShadow_1534_31596" result="effect6_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="100"></feOffset><feGaussianBlur stdDeviation="40"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0196802 0"></feColorMatrix><feBlend in2="effect6_dropShadow_1534_31596" result="effect7_dropShadow_1534_31596"></feBlend><feBlend in="SourceGraphic" in2="effect7_dropShadow_1534_31596" result="shape"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"></feColorMatrix><feBlend in2="shape" result="effect8_innerShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feMorphology in="SourceAlpha" radius="1" result="effect9_innerShadow_1534_31596"></feMorphology><feOffset></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"></feColorMatrix><feBlend in2="effect8_innerShadow_1534_31596" result="effect9_innerShadow_1534_31596"></feBlend></filter><filter id="CalendarDark_svg__d" width="260" height="308" x="178" y="-28" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="14"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1534_31596"></feComposite><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="2.767"></feOffset><feGaussianBlur stdDeviation="1.107"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.07 0"></feColorMatrix><feBlend in2="effect1_backgroundBlur_1534_31596" result="effect2_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="6.65"></feOffset><feGaussianBlur stdDeviation="2.66"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0503198 0"></feColorMatrix><feBlend in2="effect2_dropShadow_1534_31596" result="effect3_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="12.522"></feOffset><feGaussianBlur stdDeviation="5.009"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0417275 0"></feColorMatrix><feBlend in2="effect3_dropShadow_1534_31596" result="effect4_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="22.336"></feOffset><feGaussianBlur stdDeviation="8.935"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.035 0"></feColorMatrix><feBlend in2="effect4_dropShadow_1534_31596" result="effect5_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="41.778"></feOffset><feGaussianBlur stdDeviation="16.711"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0282725 0"></feColorMatrix><feBlend in2="effect5_dropShadow_1534_31596" result="effect6_dropShadow_1534_31596"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="100"></feOffset><feGaussianBlur stdDeviation="40"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0196802 0"></feColorMatrix><feBlend in2="effect6_dropShadow_1534_31596" result="effect7_dropShadow_1534_31596"></feBlend><feBlend in="SourceGraphic" in2="effect7_dropShadow_1534_31596" result="shape"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feMorphology in="SourceAlpha" radius="1" result="effect8_innerShadow_1534_31596"></feMorphology><feOffset></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"></feColorMatrix><feBlend in2="shape" result="effect8_innerShadow_1534_31596"></feBlend></filter></defs>
			</svg>
			<h2 style="font-weight: 600; font-size: 1.5rem; color: #555;">No events found</h2>
			<p style="font-weight: 500; color: #555;">Why not make one?</p>
			<button type="submit" style="background: rgba(255, 255, 255, 0.16);  border-radius: .5rem; border: 0px; padding: .4rem .8rem; font-weight: 600;" class="subtext">Create new event</button>

		</div>
	}
	else
	{
		<!-- Events list -->
		<div style="display: flex; flex-direction: column;">
			@foreach (var group in groupedEvents)
			{
				<div style="display: flex; flex-direction: row; gap:2rem;">
					<!-- Date on the left -->
					<div style="flex: 1; font-weight: bold; font-size: 1.2rem; border-right: dashed 2px rgba(255,255,255, 0.16)">
						@group.Key.ToString("MMMM dd, yyyy")
					</div>

					<!-- Events on the right -->
					<div style="flex: 3;">
						@foreach (var eventItem in group)
						{
							<div class="bg-card border-card" style=" margin: 0rem 0rem 2rem 0rem; padding: 1rem;border-radius: .5rem;display: flex;flex-direction: column;gap: .2rem;">
								<p class="inputtext" style="margin: 0;">@eventItem.StartTime.ToString(@"h\:mm")</p>
								<h3 style="margin: 0; font-size: 1.1rem;">@eventItem.EventName</h3>
								<p style="margin: 0;" class="inputtext">Location: @eventItem.LocationID</p>
								<p style="margin: 0;" class="inputtext">Guests: @eventItem.MaxGuests</p>
								<a asp-action="Details" asp-controller="Events" asp-route-eventid="@eventItem.EventID" class="inputtext px-2 py-1" style="border:none; width:fit-content; background: rgba(255,255,255, 0.3); border-radius:.5rem;">Check Event</a>
							</div>
						}
					</div>
				</div>
			}
		</div>
	}
</div>
